# Web Vitals ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

Web Vitals æ˜¯ Google æ¨å‡ºçš„ä¸€ç»„ç»Ÿä¸€æŒ‡æ ‡ï¼Œç”¨äºè¡¡é‡ç½‘é¡µçš„ç”¨æˆ·ä½“éªŒè´¨é‡ã€‚æœ¬é¡¹ç›®å·²é›†æˆ Web Vitals ç›‘æ§ï¼Œå¯ä»¥å®æ—¶ç›‘æµ‹é¡µé¢æ€§èƒ½ã€‚

## æ ¸å¿ƒæŒ‡æ ‡è¯´æ˜

### 1. LCP (Largest Contentful Paint) - æœ€å¤§å†…å®¹ç»˜åˆ¶
- **å«ä¹‰**: æµ‹é‡é¡µé¢ä¸»è¦å†…å®¹åŠ è½½å®Œæˆçš„æ—¶é—´
- **è‰¯å¥½**: â‰¤ 2.5ç§’
- **éœ€è¦æ”¹è¿›**: 2.5-4.0ç§’  
- **å·®**: > 4.0ç§’

### 2. INP (Interaction to Next Paint) - äº¤äº’åˆ°ä¸‹ä¸€æ¬¡ç»˜åˆ¶
- **å«ä¹‰**: æµ‹é‡ç”¨æˆ·äº¤äº’åˆ°è§†è§‰å“åº”çš„å»¶è¿Ÿ
- **è‰¯å¥½**: â‰¤ 200æ¯«ç§’
- **éœ€è¦æ”¹è¿›**: 200-500æ¯«ç§’
- **å·®**: > 500æ¯«ç§’

### 3. CLS (Cumulative Layout Shift) - ç´¯ç§¯å¸ƒå±€åç§»
- **å«ä¹‰**: æµ‹é‡é¡µé¢å…ƒç´ æ„å¤–ç§»åŠ¨çš„ç¨‹åº¦
- **è‰¯å¥½**: â‰¤ 0.1
- **éœ€è¦æ”¹è¿›**: 0.1-0.25
- **å·®**: > 0.25

### 4. FCP (First Contentful Paint) - é¦–æ¬¡å†…å®¹ç»˜åˆ¶
- **å«ä¹‰**: æµ‹é‡é¡µé¢é¦–æ¬¡æ¸²æŸ“ä»»ä½•å†…å®¹çš„æ—¶é—´
- **è‰¯å¥½**: â‰¤ 1.8ç§’
- **éœ€è¦æ”¹è¿›**: 1.8-3.0ç§’
- **å·®**: > 3.0ç§’

### 5. TTFB (Time to First Byte) - é¦–å­—èŠ‚æ—¶é—´
- **å«ä¹‰**: æµ‹é‡æµè§ˆå™¨æ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´
- **è‰¯å¥½**: â‰¤ 800æ¯«ç§’
- **éœ€è¦æ”¹è¿›**: 800-1800æ¯«ç§’
- **å·®**: > 1800æ¯«ç§’

### æ³¨æ„ï¼šFID å·²è¢« INP æ›¿ä»£
Google å·²å°† FID (First Input Delay) æ›¿æ¢ä¸º INP (Interaction to Next Paint)ï¼Œå› ä¸º INP èƒ½æ›´å¥½åœ°åæ˜ ç”¨æˆ·äº¤äº’ä½“éªŒã€‚

## ä½¿ç”¨æ–¹æ³•

### 1. å¼€å‘ç¯å¢ƒå®æ—¶ç›‘æ§

åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼ŒWeb Vitals ä¼šè‡ªåŠ¨å¯ç”¨ï¼š

```tsx
// å·²è‡ªåŠ¨é›†æˆåˆ° layout.tsx ä¸­
<WebVitalsProvider>
  <YourApp />
  <WebVitalsDashboard /> {/* å¼€å‘ç¯å¢ƒæ˜¾ç¤ºä»ªè¡¨æ¿ */}
</WebVitalsProvider>
```

### 2. æŸ¥çœ‹å®æ—¶æ•°æ®

- å¼€å¯å¼€å‘æœåŠ¡å™¨ï¼š`npm run dev`
- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ§åˆ¶å°
- ç‚¹å‡»é¡µé¢å³ä¸‹è§’çš„ "ğŸ“Š Web Vitals" æŒ‰é’®æŸ¥çœ‹å®æ—¶ä»ªè¡¨æ¿
- æ§åˆ¶å°ä¼šè¾“å‡ºè¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡

### 3. æ‰‹åŠ¨æ”¶é›†æŒ‡æ ‡

```tsx
import { initWebVitals, collectWebVitals } from '@/lib/web-vitals';

// åˆå§‹åŒ–ç›‘æ§
initWebVitals();

// æ‰‹åŠ¨è§¦å‘æ”¶é›†
collectWebVitals();
```

### 4. ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š

```tsx
import { generatePerformanceReport } from '@/lib/web-vitals';

// ç”Ÿæˆå®Œæ•´æ€§èƒ½æŠ¥å‘Š
const report = generatePerformanceReport();
console.log(report);
```

## ç”Ÿäº§ç¯å¢ƒé…ç½®

### 1. Google Analytics 4 é›†æˆ

åœ¨ `src/lib/web-vitals.ts` ä¸­å–æ¶ˆæ³¨é‡Šï¼š

```tsx
// ç”Ÿäº§ç¯å¢ƒå‘é€åˆ° GA4
if (process.env.NODE_ENV === 'production') {
  gtag('event', metric.name, {
    value: Math.round(metric.name === 'CLS' ? metric.value * 1000 : metric.value),
    metric_id: metric.id,
    metric_value: metric.value,
    metric_delta: metric.delta,
    metric_rating: metric.rating,
  });
}
```

### 2. è‡ªå®šä¹‰åˆ†æç«¯ç‚¹

```tsx
// å‘é€åˆ°è‡ªå®šä¹‰API
if (process.env.NODE_ENV === 'production') {
  fetch('/api/web-vitals', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(metric),
  });
}
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### æ”¹å–„ LCP
1. ä¼˜åŒ–æœåŠ¡å™¨å“åº”æ—¶é—´
2. å¯ç”¨ç¼“å­˜ç­–ç•¥
3. ä¼˜åŒ–å›¾ç‰‡åŠ è½½ï¼ˆä½¿ç”¨ Next.js Image ç»„ä»¶ï¼‰
4. é¢„åŠ è½½å…³é”®èµ„æº

### æ”¹å–„ INP
1. ä¼˜åŒ–äº‹ä»¶å¤„ç†å‡½æ•°
2. åˆ†å‰²é•¿ä»»åŠ¡
3. ä½¿ç”¨ Web Workers
4. å»¶è¿ŸåŠ è½½éå…³é”® JavaScript
5. ä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬

### æ”¹å–„ CLS
1. ä¸ºå›¾ç‰‡å’ŒåµŒå…¥å¼å†…å®¹è®¾ç½®å°ºå¯¸
2. é¿å…åœ¨ç°æœ‰å†…å®¹ä¸Šæ–¹æ’å…¥å†…å®¹
3. ä½¿ç”¨ font-display: swap
4. ç¡®ä¿å¹¿å‘Šæœ‰é¢„ç•™ç©ºé—´

### æ”¹å–„ FCP
1. å‡å°‘é˜»å¡æ¸²æŸ“çš„èµ„æº
2. å†…è”å…³é”® CSS
3. å¯ç”¨æ–‡æœ¬å‹ç¼©
4. ä¼˜åŒ– Web å­—ä½“

### æ”¹å–„ TTFB
1. ä½¿ç”¨ CDN
2. ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
3. å¯ç”¨ç¼“å­˜
4. ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“

## ç›‘æ§æœ€ä½³å®è·µ

1. **æŒç»­ç›‘æ§**: åœ¨æ¯æ¬¡éƒ¨ç½²åæ£€æŸ¥æŒ‡æ ‡
2. **è®¾ç½®å‘Šè­¦**: å½“æŒ‡æ ‡ä¸‹é™æ—¶åŠæ—¶é€šçŸ¥
3. **A/B æµ‹è¯•**: æ¯”è¾ƒä¸åŒä¼˜åŒ–ç­–ç•¥çš„æ•ˆæœ
4. **çœŸå®ç”¨æˆ·ç›‘æ§**: æ”¶é›†çœŸå®ç”¨æˆ·çš„æ€§èƒ½æ•°æ®
5. **å®šæœŸå®¡æŸ¥**: å®šæœŸåˆ†ææ€§èƒ½è¶‹åŠ¿

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æŒ‡æ ‡æœªæ˜¾ç¤º**: ç¡®ä¿åœ¨å®¢æˆ·ç«¯ç¯å¢ƒä¸”é¡µé¢å·²å®Œå…¨åŠ è½½
2. **CLS è¿‡é«˜**: æ£€æŸ¥å›¾ç‰‡å°ºå¯¸ã€åŠ¨æ€å†…å®¹æ’å…¥
3. **LCP è¿‡æ…¢**: ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„ã€å›¾ç‰‡å‹ç¼©
4. **FID è¿‡é«˜**: å‡å°‘ä¸»çº¿ç¨‹é˜»å¡ã€ä¼˜åŒ– JavaScript

### è°ƒè¯•å·¥å…·

1. Chrome DevTools Performance é¢æ¿
2. Lighthouse æ€§èƒ½å®¡è®¡
3. Web Vitals Chrome æ‰©å±•
4. PageSpeed Insights

## ç›¸å…³èµ„æº

- [Web Vitals å®˜æ–¹æ–‡æ¡£](https://web.dev/vitals/)
- [Google PageSpeed Insights](https://pagespeed.web.dev/)
- [Lighthouse å·¥å…·](https://developers.google.com/web/tools/lighthouse)
- [Core Web Vitals ä¼˜åŒ–æŒ‡å—](https://web.dev/optimize-vitals/)